% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/adjust_service_counts.R
\name{adjust_service_data}
\alias{adjust_service_data}
\title{Adjust Service Data for Coverage Analysis}
\usage{
adjust_service_data(
  .data,
  adjustment = c("default", "custom", "none"),
  k_factors = NULL
)
}
\arguments{
\item{.data}{A \code{cd_data} dataframe, typically containing health facility data
from DHIS-2 with service counts by month and district.}

\item{adjustment}{A string specifying the type of adjustment to apply:
\itemize{
\item \strong{"default"}: Applies a standard k-factor (0.25) across all indicators.
\item \strong{"custom"}: Uses user-provided \code{k_factors} for different indicator groups
(values must be between 0 and 1).
\item \strong{"none"}: Returns the data without adjustments.
}}

\item{k_factors}{A named numeric vector of custom k-factor values between 0 and
1 for each indicator group (e.g., \code{c(anc = 0.3, idelv = 0.2, ...)}). Only used
when \code{adjustment = "custom"}.}
}
\value{
A \code{cd_data} object containing adjusted service data, with flagged outliers
managed, and missing values imputed for completeness.
}
\description{
\code{adjust_service_data} processes DHIS-2 service data to correct for reporting
completeness, apply k-factor adjustments, and handle extreme outliers, ensuring
data consistency for analytical use. These steps aim to provide a standardized
approach to data preparation for immunization coverage and health service utilization analysis.
}
\details{
This function includes several processing steps to prepare service data:
\enumerate{
\item \strong{Validation}: Checks \code{.data} structure and validates \code{adjustment} input.
If using \code{custom}, ensures \code{k_factors} are valid.
\item \strong{k-Factor Defaults}: Sets default k-factor values at 0.25, which can be
modified if \code{custom} values are provided.
\item \strong{Reporting Completeness}: For any district-year reporting rates below
75\%, imputes missing data by district median, as low reporting can impact
trend reliability.
\item \strong{k-Factor Scaling}: Adjusts service counts by applying the k-factor
relative to reporting rates.
\item \strong{Outlier Detection}: Identifies extreme outliers using Hampelâ€™s X84
method, replacing values beyond 5 MADs from the median.
\item \strong{Data Imputation}: Replaces remaining missing data with district medians.
}
}
\examples{
\dontrun{
# Default adjustment
adjusted_data <- adjust_service_data(data, adjustment = "default")

# Custom adjustment
custom_k <- c(anc = 0.3, idelv = 0.2, pnc = 0.35, vacc = 0.4,
              opd = 0.3, ipd = 0.25)
adjusted_data_custom <- adjust_service_data(data, adjustment = "custom",
                                            k_factors = custom_k)

# No adjustment
unadjusted_data <- adjust_service_data(data, adjustment = "none")
}

}
